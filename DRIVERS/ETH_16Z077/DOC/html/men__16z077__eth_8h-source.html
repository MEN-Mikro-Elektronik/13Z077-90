<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>MEN - Linux native Driver for 16Z077/87 Ethernet IP cores - men_16z077_eth.h Source File</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<meta name="Language" content="en, english">
<meta name="Copyright" content="All material copyright MEN Mikro Elektronik GmbH">
<link href="men_stylesheet.css" rel="stylesheet" type="text/css">
</head>
<body>

<div class="left_to_right" style="padding-top: 6px; background-color: #F0F0F0; height: 110px; border-bottom: 2px solid #D1D1D2;">
	<!-- Titel -->
	<img src="menlogo.gif" alt="MEN" style="float: left; height: 103px; width: 155px; margin: 0px;">
	<h1 style="margin: 0px; padding-top: 35px; padding-bottom: 0px;">Linux native Driver for 16Z077/87 Ethernet IP cores &nbsp; </h1>
	<h3>men_16z077_eth.h Source File</h3>
</div>

<div class="left_to_right">
<!-- Hauptteil -->
	<div class="main">
<!-- Generated by Doxygen 1.3.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>men_16z077_eth.h</h1><div class="fragment"><pre>00001 <span class="comment">/****************************************************************************</span>
00002 <span class="comment"> * Copyright 2019, MEN Mikro Elektronik GmbH</span>
00003 <span class="comment"> ****************************************************************************/</span>
00004 <span class="comment">/*</span>
00005 <span class="comment">* This program is free software: you can redistribute it and/or modify</span>
00006 <span class="comment">* it under the terms of the GNU General Public License as published by</span>
00007 <span class="comment">* the Free Software Foundation, either version 2 of the License, or</span>
00008 <span class="comment">* (at your option) any later version.</span>
00009 <span class="comment">*</span>
00010 <span class="comment">* This program is distributed in the hope that it will be useful,</span>
00011 <span class="comment">* but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
00012 <span class="comment">* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
00013 <span class="comment">* GNU General Public License for more details.</span>
00014 <span class="comment">*</span>
00015 <span class="comment">* You should have received a copy of the GNU General Public License</span>
00016 <span class="comment">* along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
00017 <span class="comment">*/</span>
00018 
00019 <span class="preprocessor">#ifndef _MEN_Z77_ETH_</span>
00020 <span class="preprocessor"></span><span class="preprocessor">#define _MEN_Z77_ETH_</span>
00021 <span class="preprocessor"></span>
00022 <span class="preprocessor">#include &lt;linux/netdevice.h&gt;</span>
00023 <span class="preprocessor">#include &lt;linux/etherdevice.h&gt;</span>
00024 <span class="preprocessor">#include &lt;linux/ethtool.h&gt;</span>
00025 <span class="preprocessor">#include &lt;linux/skbuff.h&gt;</span>
00026 
00027 <span class="comment">/* for EP05 support of mdio_bus facility was requested */</span>
00028 <span class="preprocessor">#if defined(CONFIG_MENEP05)</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#  include &lt;linux/phy.h&gt;</span>
00030 <span class="preprocessor">#  include &lt;linux/mii.h&gt;</span>
00031 <span class="preprocessor">#endif</span>
00032 <span class="preprocessor"></span>
00033 <span class="preprocessor">#if defined(CONFIG_VLAN_8021Q) || defined(CONFIG_VLAN_8021Q_MODULE)</span>
00034 <span class="preprocessor"></span><span class="preprocessor">#define Z77_USE_VLAN_TAGGING</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00036 <span class="preprocessor"></span>
00037 <span class="preprocessor">#define MEN_Z77_DRV_NAME  "MEN ETH: "</span>
00038 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="group____Z077MACS.html#a0">00046</a> <span class="preprocessor">#define Z77_MAC_OFFS_F11S   0x9ec000    </span>
<a name="l00047"></a><a class="code" href="group____Z077MACS.html#a1">00047</a> <span class="preprocessor">#define Z77_MAC_OFFS_F218   0x027000    </span>
<a name="l00048"></a><a class="code" href="group____Z077MACS.html#a2">00048</a> <span class="preprocessor">#define Z77_MAC_OFFS_P511   0x9cc000    </span>
<a name="l00049"></a><a class="code" href="group____Z077MACS.html#a3">00049</a> <span class="preprocessor">#define Z77_MAC_P511_IF2OFF 0x1000      </span>
<a name="l00050"></a><a class="code" href="group____Z077MACS.html#a4">00050</a> <span class="preprocessor">#define Z77_MAC_OFFS_P513   0xae2000    </span>
<a name="l00051"></a><a class="code" href="group____Z077MACS.html#a5">00051</a> <span class="preprocessor">#define Z77_MAC_P513_IF2OFF 0x1000      </span>
00052 <span class="preprocessor">#define MEN_F11S_SERNUM_MAX 16383</span>
00053 <span class="preprocessor"></span><span class="preprocessor">#define MEN_F11S_SERNUM_BASE    0xc000</span>
00054 <span class="preprocessor"></span><span class="preprocessor">#define MEN_F11S        11</span>
00055 <span class="preprocessor"></span><span class="preprocessor">#define MEN_F218        218</span>
00056 <span class="preprocessor"></span><span class="preprocessor">#define MEN_P511        511</span>
00057 <span class="preprocessor"></span><span class="preprocessor">#define MEN_P513        513</span>
00058 <span class="preprocessor"></span>
<a name="l00067"></a><a class="code" href="group____Z077BASES.html#a0">00067</a> <span class="preprocessor">#define Z077_BASE       ((void*)dev-&gt;base_addr) </span>
<a name="l00068"></a><a class="code" href="group____Z077BASES.html#a1">00068</a> <span class="preprocessor">#define Z077_BDBASE     (np-&gt;bdBase)  </span>
<a name="l00069"></a><a class="code" href="group____Z077BASES.html#a2">00069</a> <span class="preprocessor">#define Z077_BD_OFFS        (np-&gt;bdOff )  </span>
<a name="l00070"></a><a class="code" href="group____Z077BASES.html#a3">00070</a> <span class="preprocessor">#define TBD_OFF         (np-&gt;tbdOff ) </span>
<a name="l00071"></a><a class="code" href="group____Z077BASES.html#a4">00071</a> <span class="preprocessor">#define RBD_OFF         (np-&gt;rbdOff ) </span>
<a name="l00072"></a><a class="code" href="group____Z077BASES.html#a5">00072</a> <span class="preprocessor">#define Z77_ETHBUF_SIZE     0x1000        </span>
<a name="l00073"></a><a class="code" href="group____Z077BASES.html#a6">00073</a> <span class="preprocessor">#define Z77_CFGREG_SIZE     0x800         </span>
<a name="l00074"></a><a class="code" href="group____Z077BASES.html#a7">00074</a> <span class="preprocessor">#define MY_TX_TIMEOUT       (5*HZ)        </span>
<a name="l00075"></a><a class="code" href="group____Z077BASES.html#a8">00075</a> <span class="preprocessor">#define Z077_REG_BASE       (0)           </span>
<a name="l00076"></a><a class="code" href="group____Z077BASES.html#a9">00076</a> <span class="preprocessor">#define Z77_PACKLEN_DEFAULT     0x003c05fc    </span>
00078 <span class="preprocessor"></span>
00079 <span class="preprocessor"></span>
<a name="l00083"></a><a class="code" href="group____Z077__REGISTERS.html#a0">00083</a> <span class="preprocessor">#define Z077_REG_MODER      (Z077_REG_BASE+0x00) </span>
<a name="l00084"></a><a class="code" href="group____Z077__REGISTERS.html#a1">00084</a> <span class="preprocessor">#define Z077_REG_INT_SRC    (Z077_REG_BASE+0x04) </span>
<a name="l00085"></a><a class="code" href="group____Z077__REGISTERS.html#a2">00085</a> <span class="preprocessor">#define Z077_REG_INT_MASK   (Z077_REG_BASE+0x08) </span>
<a name="l00086"></a><a class="code" href="group____Z077__REGISTERS.html#a3">00086</a> <span class="preprocessor">#define Z077_REG_IPGT       (Z077_REG_BASE+0x0c) </span>
<a name="l00087"></a><a class="code" href="group____Z077__REGISTERS.html#a4">00087</a> <span class="preprocessor">#define Z077_REG_IPGR1      (Z077_REG_BASE+0x10) </span>
<a name="l00088"></a><a class="code" href="group____Z077__REGISTERS.html#a5">00088</a> <span class="preprocessor">#define Z077_REG_IPGR2      (Z077_REG_BASE+0x14) </span>
<a name="l00089"></a><a class="code" href="group____Z077__REGISTERS.html#a6">00089</a> <span class="preprocessor">#define Z077_REG_PACKLEN    (Z077_REG_BASE+0x18) </span>
<a name="l00090"></a><a class="code" href="group____Z077__REGISTERS.html#a7">00090</a> <span class="preprocessor">#define Z077_REG_COLLCONF   (Z077_REG_BASE+0x1c) </span>
<a name="l00091"></a><a class="code" href="group____Z077__REGISTERS.html#a8">00091</a> <span class="preprocessor">#define Z077_REG_TX_BDNUM   (Z077_REG_BASE+0x20) </span>
<a name="l00092"></a><a class="code" href="group____Z077__REGISTERS.html#a9">00092</a> <span class="preprocessor">#define Z077_REG_CTRLMODER  (Z077_REG_BASE+0x24) </span>
<a name="l00093"></a><a class="code" href="group____Z077__REGISTERS.html#a10">00093</a> <span class="preprocessor">#define Z077_REG_MIIMODER   (Z077_REG_BASE+0x28) </span>
<a name="l00094"></a><a class="code" href="group____Z077__REGISTERS.html#a11">00094</a> <span class="preprocessor">#define Z077_REG_MIICMD     (Z077_REG_BASE+0x2c) </span>
<a name="l00095"></a><a class="code" href="group____Z077__REGISTERS.html#a12">00095</a> <span class="preprocessor">#define Z077_REG_MIIADR     (Z077_REG_BASE+0x30) </span>
<a name="l00096"></a><a class="code" href="group____Z077__REGISTERS.html#a13">00096</a> <span class="preprocessor">#define Z077_REG_MIITX_DATA     (Z077_REG_BASE+0x34) </span>
<a name="l00097"></a><a class="code" href="group____Z077__REGISTERS.html#a14">00097</a> <span class="preprocessor">#define Z077_REG_MIIRX_DATA     (Z077_REG_BASE+0x38) </span>
<a name="l00098"></a><a class="code" href="group____Z077__REGISTERS.html#a15">00098</a> <span class="preprocessor">#define Z077_REG_MIISTATUS      (Z077_REG_BASE+0x3c) </span>
<a name="l00099"></a><a class="code" href="group____Z077__REGISTERS.html#a16">00099</a> <span class="preprocessor">#define Z077_REG_MAC_ADDR0  (Z077_REG_BASE+0x40) </span>
<a name="l00100"></a><a class="code" href="group____Z077__REGISTERS.html#a17">00100</a> <span class="preprocessor">#define Z077_REG_MAC_ADDR1  (Z077_REG_BASE+0x44) </span>
<a name="l00101"></a><a class="code" href="group____Z077__REGISTERS.html#a18">00101</a> <span class="preprocessor">#define Z077_REG_HASH_ADDR0     (Z077_REG_BASE+0x48) </span>
<a name="l00102"></a><a class="code" href="group____Z077__REGISTERS.html#a19">00102</a> <span class="preprocessor">#define Z077_REG_HASH_ADDR1     (Z077_REG_BASE+0x4c) </span>
<a name="l00103"></a><a class="code" href="group____Z077__REGISTERS.html#a20">00103</a> <span class="preprocessor">#define Z077_REG_TXCTRL     (Z077_REG_BASE+0x50) </span>
00105 <span class="preprocessor"></span>
00106 <span class="preprocessor"></span>
<a name="l00110"></a><a class="code" href="group____Z087__NEWREGS.html#a0">00110</a> <span class="preprocessor">#define Z077_REG_GLOBALRST  (Z077_REG_BASE+0x54) </span>
<a name="l00111"></a><a class="code" href="group____Z087__NEWREGS.html#a1">00111</a> <span class="preprocessor">#define Z077_REG_BDSTART    (Z077_REG_BASE+0x5c) </span>
<a name="l00112"></a><a class="code" href="group____Z087__NEWREGS.html#a2">00112</a> <span class="preprocessor">#define Z077_REG_RXEMPTY0   (Z077_REG_BASE+0x60) </span>
<a name="l00113"></a><a class="code" href="group____Z087__NEWREGS.html#a3">00113</a> <span class="preprocessor">#define Z077_REG_RXEMPTY1   (Z077_REG_BASE+0x64) </span>
<a name="l00114"></a><a class="code" href="group____Z087__NEWREGS.html#a4">00114</a> <span class="preprocessor">#define Z077_REG_TXEMPTY0   (Z077_REG_BASE+0x68) </span>
<a name="l00115"></a><a class="code" href="group____Z087__NEWREGS.html#a5">00115</a> <span class="preprocessor">#define Z077_REG_TXEMPTY1   (Z077_REG_BASE+0x6c) </span>
<a name="l00116"></a><a class="code" href="group____Z087__NEWREGS.html#a6">00116</a> <span class="preprocessor">#define Z077_REG_RXBDSTAT   (Z077_REG_BASE+0x70) </span>
<a name="l00117"></a><a class="code" href="group____Z087__NEWREGS.html#a7">00117</a> <span class="preprocessor">#define Z077_REG_SMBCTRL    (Z077_REG_BASE+0x74) </span>
<a name="l00119"></a><a class="code" href="group____Z087__NEWREGS.html#a8">00119</a> <span class="preprocessor">#define Z077_REG_COREREV    (Z077_REG_BASE+0x78) </span>
<a name="l00120"></a><a class="code" href="group____Z087__NEWREGS.html#a9">00120</a> <span class="preprocessor">#define Z077_REG_RXERRCNT1  (Z077_REG_BASE+0x7c) </span>
<a name="l00121"></a><a class="code" href="group____Z087__NEWREGS.html#a10">00121</a> <span class="preprocessor">#define Z077_REG_RXERRCNT2  (Z077_REG_BASE+0x80) </span>
<a name="l00122"></a><a class="code" href="group____Z087__NEWREGS.html#a11">00122</a> <span class="preprocessor">#define Z077_REG_TXERRCNT1  (Z077_REG_BASE+0x84) </span>
<a name="l00123"></a><a class="code" href="group____Z087__NEWREGS.html#a12">00123</a> <span class="preprocessor">#define Z077_REG_TXERRCNT2  (Z077_REG_BASE+0x88) </span>
00125 <span class="preprocessor">#define SMB_REG_SCL     0x1</span>
00126 <span class="preprocessor"></span><span class="preprocessor">#define SMB_REG_SDA     0x2</span>
00127 <span class="preprocessor"></span>
<a name="l00163"></a><a class="code" href="group____MACRO1.html#a0">00163</a> <span class="preprocessor">#define Z077_SET_TBD_ADDR(n,adr) \</span>
00164 <span class="preprocessor">    Z77WRITE_D32(Z077_BDBASE,  Z077_BD_OFFS+(((n)+TBD_OFF) * Z077_BDSIZE) + Z077_BD_OFFS_ADR, (adr))</span>
00165 <span class="preprocessor"></span>
00167 <span class="preprocessor">#define Z077_SET_RBD_ADDR(n,adr) \</span>
00168 <span class="preprocessor">    Z77WRITE_D32(Z077_BDBASE,  Z077_BD_OFFS+( ((n)+RBD_OFF) * Z077_BDSIZE)+ Z077_BD_OFFS_ADR, adr)</span>
<a name="l00169"></a><a class="code" href="group____MACRO1.html#a1">00169</a> <span class="preprocessor"></span>
00171 <span class="preprocessor">#define Z077_GET_RBD_ADDR(n) \</span>
00172 <span class="preprocessor">    Z77READ_D32(Z077_BDBASE, Z077_BD_OFFS + ( ((n)+RBD_OFF) * Z077_BDSIZE) + Z077_BD_OFFS_ADR)</span>
00173 <span class="preprocessor"></span>
00175 <span class="preprocessor">#define Z077_GET_TBD_ADDR(n) \</span>
00176 <span class="preprocessor">    Z77READ_D32(Z077_BDBASE, Z077_BD_OFFS + ( ((n)+TBD_OFF) * Z077_BDSIZE)+Z077_BD_OFFS_ADR)</span>
00177 <span class="preprocessor"></span>
00179 <span class="preprocessor">#define Z077_SET_TBD_FLAG(n,f)   \</span>
00180 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE, Z077_BD_OFFS+( ((n)+TBD_OFF)*Z077_BDSIZE), \</span>
<a name="l00181"></a><a class="code" href="group____MACRO1.html#a3">00181</a> <span class="preprocessor">            Z77READ_D16( Z077_BDBASE, Z077_BD_OFFS+( ((n)+TBD_OFF)*Z077_BDSIZE))| (f) )</span>
00182 <span class="preprocessor"></span>
00183 <span class="preprocessor">#define Z077_SET_RBD_FLAG(n,f) \</span>
00184 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE, Z077_BD_OFFS + ((n)+RBD_OFF) * Z077_BDSIZE,\</span>
00185 <span class="preprocessor">            Z77READ_D16( Z077_BDBASE, Z077_BD_OFFS + ((n)+RBD_OFF) * Z077_BDSIZE)| (f) )</span>
00186 <span class="preprocessor"></span>
<a name="l00187"></a><a class="code" href="group____MACRO1.html#a4">00187</a> <span class="preprocessor">#define Z077_CLR_TBD_FLAG(n,f) \</span>
00188 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE, Z077_BD_OFFS + (((n)+TBD_OFF) * Z077_BDSIZE),\</span>
00189 <span class="preprocessor">            Z77READ_D16( Z077_BDBASE, Z077_BD_OFFS + (((n)+TBD_OFF) * Z077_BDSIZE)) &amp; ~(f) )</span>
00190 <span class="preprocessor"></span>
00192 <span class="preprocessor">#define Z077_CLR_RBD_FLAG(n,f)\</span>
00193 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE, Z077_BD_OFFS + ((n)+RBD_OFF) * Z077_BDSIZE,\</span>
<a name="l00194"></a><a class="code" href="group____MACRO1.html#a5">00194</a> <span class="preprocessor">            Z77READ_D16( Z077_BDBASE, Z077_BD_OFFS + ((n)+RBD_OFF) * Z077_BDSIZE) &amp; ~(f) )</span>
00195 <span class="preprocessor"></span>
00197 <span class="preprocessor">#define Z077_GET_RBD_FLAG(n,f)\</span>
00198 <span class="preprocessor">    (Z77READ_D16(Z077_BDBASE, Z077_BD_OFFS+( ((n)+RBD_OFF)*Z077_BDSIZE)) &amp; (f) )</span>
00199 <span class="preprocessor"></span>
<a name="l00201"></a><a class="code" href="group____MACRO1.html#a6">00201</a> <span class="preprocessor">#define Z077_GET_TBD_FLAG(n,f) \</span>
00202 <span class="preprocessor">    (Z77READ_D16(Z077_BDBASE, Z077_BD_OFFS+( ((n)+TBD_OFF)*Z077_BDSIZE)) &amp; (f) )</span>
00203 <span class="preprocessor"></span>
00205 <span class="preprocessor">#define Z077_SET_TBD_LEN(n,l) \</span>
00206 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE, Z077_BD_OFFS + Z077_BD_OFFS_LEN+( ((n)+TBD_OFF) * Z077_BDSIZE), (l));</span>
00207 <span class="preprocessor"></span>
<a name="l00209"></a><a class="code" href="group____MACRO1.html#a7">00209</a> <span class="preprocessor">#define Z077_GET_TBD_LEN(n) \</span>
00210 <span class="preprocessor">    Z77READ_D16(Z077_BDBASE,    Z077_BD_OFFS + Z077_BD_OFFS_LEN+( ((n)+TBD_OFF) * Z077_BDSIZE))</span>
00211 <span class="preprocessor"></span>
00213 <span class="preprocessor">#define Z077_GET_RBD_LEN(n) \</span>
00214 <span class="preprocessor">    Z77READ_D16(Z077_BDBASE,   Z077_BD_OFFS+( ((n)+RBD_OFF) * Z077_BDSIZE) + Z077_BD_OFFS_LEN )</span>
00215 <span class="preprocessor"></span>
<a name="l00217"></a><a class="code" href="group____MACRO1.html#a8">00217</a> <span class="preprocessor">#define Z077_CLR_RBD_LEN(n) \</span>
00218 <span class="preprocessor">    Z77WRITE_D16(Z077_BDBASE,  Z077_BD_OFFS+( ((n)+RBD_OFF) * Z077_BDSIZE)+Z077_BD_OFFS_LEN, 0 );</span>
00219 <span class="preprocessor"></span>
00221 <span class="preprocessor">#define Z077_GET_RBD_ADDR(n) \</span>
00222 <span class="preprocessor">    Z77READ_D32(Z077_BDBASE, Z077_BD_OFFS + ( ((n)+RBD_OFF) * Z077_BDSIZE) + Z077_BD_OFFS_ADR)</span>
<a name="l00223"></a><a class="code" href="group____MACRO1.html#a9">00223</a> <span class="preprocessor"></span>
00225 <span class="preprocessor">#define Z077_RBD_EMPTY(n) Z077_GET_RBD_FLAG((n), OETH_RX_BD_EMPTY)</span>
00226 <span class="preprocessor"></span>
<a name="l00229"></a><a class="code" href="group____MACRO1.html#a10">00229</a> 
00234 <span class="preprocessor">#define OETH_TOTAL_BD       128     </span>
<a name="l00235"></a><a class="code" href="group____MACRO1.html#a11">00235</a> <span class="preprocessor">#define OETH_MAXBUF_LEN     0x610   </span>
00237 <span class="preprocessor"></span>
00238 <span class="preprocessor"></span>
00243 <span class="preprocessor">#define ETHT_MESSAGE_OFF    0           </span>
00244 <span class="preprocessor">#define ETHT_MESSAGE_LVL1   1           </span>
00245 <span class="preprocessor">#define ETHT_MESSAGE_LVL2   2           </span>
00246 <span class="preprocessor">#define ETHT_MESSAGE_LVL3   3           </span>
<a name="l00247"></a><a class="code" href="group____MACRO1.html#a13">00247</a> <span class="preprocessor">#define Z77_MAX_MSGLVL          ETHT_MESSAGE_LVL3       </span><span class="comment">/* to be set to highest LVL */</span>
00248 
00255 <span class="preprocessor">#define OETH_TX_BD_READY     0x8000   </span>
00256 <span class="preprocessor">#define OETH_TX_BD_IRQ       0x4000   </span>
00257 <span class="preprocessor">#define OETH_TX_BD_WRAP      0x2000   </span>
00258 <span class="preprocessor">#define OETH_TX_BD_PAD       0x1000   </span>
<a name="l00259"></a><a class="code" href="group____MACRO1.html#a14">00259</a> <span class="preprocessor">#define OETH_TX_BD_CRC       0x0800   </span>
00260 <span class="preprocessor">#define OETH_TX_BD_UNDERRUN  0x0100   </span>
00261 <span class="preprocessor">#define OETH_TX_BD_RETRY     0x00F0   </span>
00262 <span class="preprocessor">#define OETH_TX_BD_RETLIM    0x0008   </span>
00263 <span class="preprocessor">#define OETH_TX_BD_LATECOL   0x0004   </span>
00264 <span class="preprocessor">#define OETH_TX_BD_DEFER     0x0002   </span>
00265 <span class="preprocessor">#define OETH_TX_BD_CARRIER   0x0001   </span>
00267 <span class="preprocessor"></span>
00268 <span class="preprocessor"></span>
00273 <span class="preprocessor">#define OETH_RX_BD_EMPTY     0x8000 </span>
00274 <span class="preprocessor">#define OETH_RX_BD_IRQ       0x4000 </span>
00275 <span class="preprocessor">#define OETH_RX_BD_WRAP      0x2000 </span>
00276 <span class="preprocessor">#define OETH_RX_BD_MISS      0x0080 </span>
00277 <span class="preprocessor">#define OETH_RX_BD_OVERRUN   0x0040 </span>
<a name="l00278"></a><a class="code" href="group____ETHT1.html#a0">00278</a> <span class="preprocessor">#define OETH_RX_BD_INVSYMB   0x0020 </span>
<a name="l00279"></a><a class="code" href="group____ETHT1.html#a1">00279</a> <span class="preprocessor">#define OETH_RX_BD_DRIBBLE   0x0010 </span>
<a name="l00280"></a><a class="code" href="group____ETHT1.html#a2">00280</a> <span class="preprocessor">#define OETH_RX_BD_TOOLONG   0x0008 </span>
<a name="l00281"></a><a class="code" href="group____ETHT1.html#a3">00281</a> <span class="preprocessor">#define OETH_RX_BD_SHORT     0x0004 </span>
00282 <span class="preprocessor">#define OETH_RX_BD_CRCERR    0x0002 </span>
00283 <span class="preprocessor">#define OETH_RX_BD_LATECOL   0x0001 </span>
00285 <span class="preprocessor"></span>
00286 <span class="preprocessor"></span>
<a name="l00291"></a><a class="code" href="group____TXDB.html#a1">00291</a> <span class="preprocessor">#define REG_RXSTAT_REV      (1&lt;&lt;6)  </span>
<a name="l00292"></a><a class="code" href="group____TXDB.html#a2">00292</a> <span class="preprocessor">#define REG_RXSTAT_RXEMPTY  (1&lt;&lt;7)  </span>
<a name="l00294"></a><a class="code" href="group____TXDB.html#a4">00294</a> <span class="preprocessor"></span>
<a name="l00295"></a><a class="code" href="group____TXDB.html#a5">00295</a> <span class="preprocessor"></span>
<a name="l00299"></a><a class="code" href="group____TXDB.html#a9">00299</a> <span class="preprocessor">#define REG_COREREV_REVISION    (1&lt;&lt;0)  </span>
<a name="l00300"></a><a class="code" href="group____TXDB.html#a10">00300</a> <span class="preprocessor">#define REG_COREREV_IRQNEWEN    (1&lt;&lt;8)  </span>
00302 <span class="preprocessor"></span>
00303 <span class="preprocessor"></span>
00307 <span class="preprocessor">#define OETH_MODER_RXEN      (1&lt;&lt;0)  </span>
<a name="l00308"></a><a class="code" href="group____RXDB.html#a0">00308</a> <span class="preprocessor">#define OETH_MODER_TXEN      (1&lt;&lt;1)  </span>
<a name="l00309"></a><a class="code" href="group____RXDB.html#a1">00309</a> <span class="preprocessor">#define OETH_MODER_NOPRE     (1&lt;&lt;2)  </span>
<a name="l00310"></a><a class="code" href="group____RXDB.html#a2">00310</a> <span class="preprocessor">#define OETH_MODER_BRO       (1&lt;&lt;3)  </span>
<a name="l00311"></a><a class="code" href="group____RXDB.html#a3">00311</a> <span class="preprocessor">#define OETH_MODER_IAM       (1&lt;&lt;4)  </span>
<a name="l00312"></a><a class="code" href="group____RXDB.html#a4">00312</a> <span class="preprocessor">#define OETH_MODER_PRO       (1&lt;&lt;5)  </span>
<a name="l00313"></a><a class="code" href="group____RXDB.html#a5">00313</a> <span class="preprocessor">#define OETH_MODER_IFG       (1&lt;&lt;6)  </span>
<a name="l00314"></a><a class="code" href="group____RXDB.html#a6">00314</a> <span class="preprocessor">#define OETH_MODER_LOOPBCK   (1&lt;&lt;7)  </span>
<a name="l00315"></a><a class="code" href="group____RXDB.html#a7">00315</a> <span class="preprocessor">#define OETH_MODER_NOBCKOF   (1&lt;&lt;8)  </span>
<a name="l00316"></a><a class="code" href="group____RXDB.html#a8">00316</a> <span class="preprocessor">#define OETH_MODER_EXDFREN   (1&lt;&lt;9)  </span>
<a name="l00317"></a><a class="code" href="group____RXDB.html#a9">00317</a> <span class="preprocessor">#define OETH_MODER_FULLD     (1&lt;&lt;10) </span>
<a name="l00318"></a><a class="code" href="group____RXDB.html#a10">00318</a> <span class="preprocessor">#define OETH_MODER_RST       (1&lt;&lt;11) </span>
00319 <span class="preprocessor">#define OETH_MODER_DLYCRCEN  (1&lt;&lt;12) </span>
00320 <span class="preprocessor">#define OETH_MODER_CRCEN     (1&lt;&lt;13) </span>
00321 <span class="preprocessor">#define OETH_MODER_HUGEN     (1&lt;&lt;14) </span>
00322 <span class="preprocessor">#define OETH_MODER_PAD       (1&lt;&lt;15) </span>
00323 <span class="preprocessor">#define OETH_MODER_RECSMALL  (1&lt;&lt;16) </span>
00324 <span class="preprocessor">#define OETH_MODER_RX_IDLE   (1&lt;&lt;17) </span>
00325 <span class="preprocessor">#define OETH_MODER_TX_IDLE   (1&lt;&lt;18) </span>
<a name="l00326"></a><a class="code" href="group____RXST.html#a0">00326</a> <span class="preprocessor">#define OETH_MODER_HD_AVAL   (1&lt;&lt;19) </span>
<a name="l00327"></a><a class="code" href="group____RXST.html#a1">00327</a> <span class="preprocessor">#define OETH_MODER_NIOSSHIFT (1&lt;&lt;27) </span>
00328 <span class="preprocessor">#define OETH_MODER_COMPLI    (5&lt;&lt;29) </span>
00331 <span class="preprocessor"></span>
00332 <span class="preprocessor"></span>
00337 <span class="preprocessor">#define OETH_INT_TXB        0x0001 </span>
00338 <span class="preprocessor">#define OETH_INT_TXE        0x0002 </span>
00339 <span class="preprocessor">#define OETH_INT_RXF        0x0004 </span>
00340 <span class="preprocessor">#define OETH_INT_RXE        0x0008 </span>
00341 <span class="preprocessor">#define OETH_INT_BUSY       0x0010 </span>
<a name="l00342"></a><a class="code" href="group____MODER.html#a0">00342</a> <span class="preprocessor">#define OETH_INT_TXC        0x0020 </span>
<a name="l00343"></a><a class="code" href="group____MODER.html#a1">00343</a> <span class="preprocessor">#define OETH_INT_RXC        0x0040 </span>
<a name="l00345"></a><a class="code" href="group____MODER.html#a3">00345</a> <span class="preprocessor"></span>
<a name="l00346"></a><a class="code" href="group____MODER.html#a4">00346</a> <span class="preprocessor"></span>
<a name="l00350"></a><a class="code" href="group____MODER.html#a8">00350</a> <span class="preprocessor">#define OETH_INT_MASK_TXB       0x0001 </span>
<a name="l00351"></a><a class="code" href="group____MODER.html#a9">00351</a> <span class="preprocessor">#define OETH_INT_MASK_TXE       0x0002 </span>
<a name="l00352"></a><a class="code" href="group____MODER.html#a10">00352</a> <span class="preprocessor">#define OETH_INT_MASK_RXF       0x0004 </span>
<a name="l00353"></a><a class="code" href="group____MODER.html#a11">00353</a> <span class="preprocessor">#define OETH_INT_MASK_RXE       0x0008 </span>
<a name="l00354"></a><a class="code" href="group____MODER.html#a12">00354</a> <span class="preprocessor">#define OETH_INT_MASK_BUSY      0x0010 </span>
<a name="l00355"></a><a class="code" href="group____MODER.html#a13">00355</a> <span class="preprocessor">#define OETH_INT_MASK_TXC       0x0020 </span>
<a name="l00356"></a><a class="code" href="group____MODER.html#a14">00356</a> <span class="preprocessor">#define OETH_INT_MASK_RXC       0x0040 </span>
<a name="l00358"></a><a class="code" href="group____MODER.html#a16">00358</a> <span class="preprocessor"></span>
<a name="l00359"></a><a class="code" href="group____MODER.html#a17">00359</a> <span class="preprocessor"></span>
<a name="l00363"></a><a class="code" href="group____MODER.html#a21">00363</a> <span class="preprocessor">#define OETH_CTRLMODER_PASSALL  0x0001 </span>
00364 <span class="preprocessor">#define OETH_CTRLMODER_RXFLOW   0x0002 </span>
00365 <span class="preprocessor">#define OETH_CTRLMODER_TXFLOW   0x0004 </span>
00367 <span class="preprocessor"></span>
00368 <span class="preprocessor"></span>
<a name="l00372"></a><a class="code" href="group____INTS.html#a0">00372</a> <span class="preprocessor">#define OETH_MIIMODER_CLKDIV    0x00FF </span>
<a name="l00373"></a><a class="code" href="group____INTS.html#a1">00373</a> <span class="preprocessor">#define OETH_MIIMODER_NOPRE     0x0100 </span>
<a name="l00374"></a><a class="code" href="group____INTS.html#a2">00374</a> <span class="preprocessor">#define OETH_MIIMODER_RST       0x0200 </span>
<a name="l00376"></a><a class="code" href="group____INTS.html#a4">00376</a> <span class="preprocessor"></span>
<a name="l00377"></a><a class="code" href="group____INTS.html#a5">00377</a> <span class="preprocessor"></span>
00381 <span class="preprocessor">#define OETH_MIICMD_SCANSTAT    0x0001 </span>
00382 <span class="preprocessor">#define OETH_MIICMD_RSTAT       0x0002 </span>
00383 <span class="preprocessor">#define OETH_MIICMD_WCTRLDATA   0x0004 </span>
<a name="l00385"></a><a class="code" href="group____INTM.html#a0">00385</a> <span class="preprocessor"></span>
<a name="l00386"></a><a class="code" href="group____INTM.html#a1">00386</a> <span class="preprocessor"></span>
<a name="l00390"></a><a class="code" href="group____INTM.html#a5">00390</a> <span class="preprocessor">#define OETH_MIIADDRESS_FIAD    0x001F </span>
<a name="l00391"></a><a class="code" href="group____INTM.html#a6">00391</a> <span class="preprocessor">#define OETH_MIIADDRESS_RGAD    0x1F00 </span>
00393 <span class="preprocessor"></span>
00394 <span class="preprocessor"></span>
<a name="l00398"></a><a class="code" href="group____CTRLMODER.html#a0">00398</a> <span class="preprocessor">#define OETH_MIISTATUS_LINKFAIL 0x0001 </span>
<a name="l00399"></a><a class="code" href="group____CTRLMODER.html#a1">00399</a> <span class="preprocessor">#define OETH_MIISTATUS_BUSY     0x0002 </span>
<a name="l00400"></a><a class="code" href="group____CTRLMODER.html#a2">00400</a> <span class="preprocessor">#define OETH_MIISTATUS_NVALID   0x0004 </span>
00402 <span class="preprocessor"></span>
00403 <span class="preprocessor"></span>
<a name="l00408"></a><a class="code" href="group____MODERMII.html#a1">00408</a> <span class="preprocessor">#define Z077_PHY_ADDRESS    1</span>
<a name="l00409"></a><a class="code" href="group____MODERMII.html#a2">00409</a> <span class="preprocessor"></span><span class="preprocessor">#define MII_100_BASE_TX_PHY 0x1f</span>
00410 <span class="preprocessor"></span><span class="preprocessor">#define MII_100BASE_PWR     (1&lt;&lt;10)</span>
00411 <span class="preprocessor"></span><span class="preprocessor">#define Z077_WEIGHT             0x40 </span><span class="comment">/* shall be equal to ETH frame storage capacity */</span>
00412 
00420 <span class="preprocessor">#define Z077_BDSIZE     0x8  </span>
00421 <span class="preprocessor">#define Z077_TBD_NUM        0x40     </span>
00422 <span class="preprocessor">#define Z077_RBD_NUM        0x40     </span>
00423 <span class="preprocessor">#define Z077_BDALIGN        (1&lt;&lt;10)  </span>
<a name="l00425"></a><a class="code" href="group____MIIA.html#a0">00425</a> <span class="preprocessor"></span>
<a name="l00426"></a><a class="code" href="group____MIIA.html#a1">00426</a> <span class="preprocessor"></span>
00430 <span class="preprocessor">#define Z077_BD_AREA_SIZE ((Z077_TBD_NUM+Z077_RBD_NUM)*Z077_BDSIZE)</span>
00431 <span class="preprocessor"></span><span class="preprocessor">#define Z077_BD_OFFS_STAT   0x0  </span>
00432 <span class="preprocessor">#define Z077_BD_OFFS_LEN    0x2  </span>
<a name="l00433"></a><a class="code" href="group____MIISR.html#a0">00433</a> <span class="preprocessor">#define Z077_BD_OFFS_ADR    0x4  </span>
<a name="l00435"></a><a class="code" href="group____MIISR.html#a2">00435</a> <span class="preprocessor"></span>
00436 <span class="preprocessor"></span>
00440 <span class="preprocessor">#define Z077_TBD_RDY     0x8000 </span>
00441 <span class="preprocessor">#define Z077_TBD_IRQ     0x4000 </span>
00442 <span class="preprocessor">#define Z077_TBD_WRAP    0x2000 </span>
00443 <span class="preprocessor">#define Z077_TBD_PAD     0x1000 </span>
00444 <span class="preprocessor">#define Z077_TBD_CRC     0x0800 </span>
00445 <span class="preprocessor">#define Z077_TBD_UR      0x0100 </span>
00446 <span class="preprocessor">#define Z077_TBD_RETRY   0x00f0 </span>
00447 <span class="preprocessor">#define Z077_TBD_RTRANS  0x0008 </span>
00448 <span class="preprocessor">#define Z077_TBD_LCOLL   0x0004 </span>
00449 <span class="preprocessor">#define Z077_TBD_DEFER   0x0002 </span>
00450 <span class="preprocessor">#define Z077_TBD_CSLOST  0x0001 </span>
00452 <span class="preprocessor"></span>
00453 <span class="preprocessor"></span>
<a name="l00457"></a><a class="code" href="group____BDDEF.html#a2">00457</a> <span class="preprocessor">#define Z077_RBD_EMP    0x8000  </span>
<a name="l00458"></a><a class="code" href="group____BDDEF.html#a3">00458</a> <span class="preprocessor">#define Z077_RBD_IRQ    0x4000  </span>
00459 <span class="preprocessor">#define Z077_RBD_WRAP   Z077_TBD_WRAP</span>
00460 <span class="preprocessor"></span><span class="preprocessor">#define Z077_RBD_CFRM   0x0100 </span>
00461 <span class="preprocessor">#define Z077_RBD_MISS   0x0080 </span>
00462 <span class="preprocessor">#define Z077_RBD_OV 0x0040 </span>
00463 <span class="preprocessor">#define Z077_RBD_IS 0x0020 </span>
00464 <span class="preprocessor">#define Z077_RBD_DN 0x0010 </span>
00465 <span class="preprocessor">#define Z077_RBD_TL 0x0008 </span>
<a name="l00466"></a><a class="code" href="group____BDAREA.html#a1">00466</a> <span class="preprocessor">#define Z077_RBD_SF 0x0004 </span>
<a name="l00467"></a><a class="code" href="group____BDAREA.html#a2">00467</a> <span class="preprocessor">#define Z077_RBD_CERR   0x0002 </span>
<a name="l00468"></a><a class="code" href="group____BDAREA.html#a3">00468</a> <span class="preprocessor">#define Z077_RBD_LC     0x0001 </span>
00470 <span class="preprocessor"></span>
00471 <span class="preprocessor"></span>
00472 <span class="comment">/* Cache macros */</span>
00473 <span class="preprocessor">#define Z77WRITE_D32(ma,offs,val)   writel(val, (void*)(ma+offs))</span>
00474 <span class="preprocessor"></span><span class="preprocessor">#define Z77WRITE_D16(ma,offs,val)   writew(val, (void*)(ma+offs))</span>
<a name="l00475"></a><a class="code" href="group____TXBDBITS.html#a0">00475</a> <span class="preprocessor"></span><span class="preprocessor">#define Z77READ_D32(ma,offs)        readl((void*)(ma+offs))</span>
<a name="l00476"></a><a class="code" href="group____TXBDBITS.html#a1">00476</a> <span class="preprocessor"></span><span class="preprocessor">#define Z77READ_D16(ma,offs)        readw((void*)(ma+offs))</span>
<a name="l00477"></a><a class="code" href="group____TXBDBITS.html#a2">00477</a> <span class="preprocessor"></span>
<a name="l00482"></a><a class="code" href="group____TXBDBITS.html#a7">00482</a> <span class="preprocessor">#define Z077_DISABLE_IRQ(n) \</span>
<a name="l00483"></a><a class="code" href="group____TXBDBITS.html#a8">00483</a> <span class="preprocessor">    Z77WRITE_D32(Z077_BASE, Z077_REG_INT_MASK, \</span>
<a name="l00484"></a><a class="code" href="group____TXBDBITS.html#a9">00484</a> <span class="preprocessor">            (Z77READ_D32(Z077_BASE,Z077_REG_INT_MASK)) &amp; ~(n) )</span>
<a name="l00485"></a><a class="code" href="group____TXBDBITS.html#a10">00485</a> <span class="preprocessor"></span>
00487 <span class="preprocessor">#define Z077_ENABLE_IRQ(n) \</span>
00488 <span class="preprocessor">    Z77WRITE_D32(Z077_BASE, Z077_REG_INT_MASK, \</span>
00489 <span class="preprocessor">            Z77READ_D32(Z077_BASE, Z077_REG_INT_MASK)|(n))</span>
00490 <span class="preprocessor"></span>
<a name="l00492"></a><a class="code" href="group____RXBDBITS.html#a0">00492</a> <span class="preprocessor">#define Z077_CLR_MODE_FLAG(f) \</span>
<a name="l00493"></a><a class="code" href="group____RXBDBITS.html#a1">00493</a> <span class="preprocessor">    Z77WRITE_D32(Z077_BASE, Z077_REG_MODER, \</span>
00494 <span class="preprocessor">            Z77READ_D32(Z077_BASE, Z077_REG_MODER) &amp;~(f))</span>
<a name="l00495"></a><a class="code" href="group____RXBDBITS.html#a3">00495</a> <span class="preprocessor"></span>
<a name="l00497"></a><a class="code" href="group____RXBDBITS.html#a5">00497</a> <span class="preprocessor">#define Z077_SET_MODE_FLAG(f) \</span>
<a name="l00498"></a><a class="code" href="group____RXBDBITS.html#a6">00498</a> <span class="preprocessor">    Z77WRITE_D32(Z077_BASE, Z077_REG_MODER, \</span>
<a name="l00499"></a><a class="code" href="group____RXBDBITS.html#a7">00499</a> <span class="preprocessor">            Z77READ_D32(Z077_BASE, Z077_REG_MODER)|(f))</span>
<a name="l00500"></a><a class="code" href="group____RXBDBITS.html#a8">00500</a> <span class="preprocessor"></span>
<a name="l00502"></a><a class="code" href="group____RXBDBITS.html#a10">00502</a> 
<a name="l00503"></a><a class="code" href="group____RXBDBITS.html#a11">00503</a> 
00509 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structz077__reg__info.html">z077_reg_info</a>
00510 {
00511     <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="structz077__reg__info.html#o0">name</a>;  
00512     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    <a class="code" href="structz077__reg__info.html#o1">addr</a>;   
00513 } <a class="code" href="structz077__reg__info.html">Z077_REG_INFO</a>;
00520 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structphy__device__tbl.html">phy_device_tbl</a>
00521 {
00522     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structphy__device__tbl.html#o0">ident</a>; 
00523     <span class="keyword">const</span> <span class="keywordtype">char</span>  *<a class="code" href="structphy__device__tbl.html#o1">name</a>;  
00524 } <a class="code" href="structphy__device__tbl.html">PHY_DEVICE_TBL</a>;
00532 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structz077__bd.html">z077_bd</a> {
<a name="l00533"></a><a class="code" href="group____MACRO0.html#a2">00533</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  <a class="code" href="structz077__bd.html#o0">BdLen</a>;      
00534     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>  <a class="code" href="structz077__bd.html#o1">BdStat</a>;     
00535     <span class="keywordtype">void</span> *      <a class="code" href="structz077__bd.html#o2">BdAddr</a>;     
00536     dma_addr_t  <a class="code" href="structz077__bd.html#o3">hdlDma</a>;     
00537 <span class="preprocessor">#if defined(Z77_USE_VLAN_TAGGING)</span>
00538 <span class="preprocessor"></span>    u32     vlan_tag;   
00539 <span class="preprocessor">#define RXD_LEN_MASK    0x0000ffff</span>
00540 <span class="preprocessor"></span><span class="preprocessor">#define RXD_LEN_SHIFT   0</span>
<a name="l00541"></a><a class="code" href="group____MACRO0.html#a3">00541</a> <span class="preprocessor"></span>    u32     type_flags;
00542 <span class="preprocessor">#define RXD_FLAG_VLAN   0x0040</span>
00543 <span class="preprocessor"></span>    u32     err_vlan;
00544 <span class="preprocessor">#define RXD_VLAN_MASK   0x0000ffff</span>
00545 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00546 <span class="preprocessor"></span>} <a class="code" href="structz077__bd.html">Z077_BD</a>;
00548 <span class="preprocessor">#endif </span><span class="comment">/* #ifndef _MEN_Z77_ETH_ */</span>
</pre></div>
	</div>
</div>

<div class="footer">
<!-- Footer -->
	<p class="footer">
	Generated for Linux native Driver for 16Z077/87 Ethernet IP cores using <a href="http://www.doxygen.org">doxygen</a>. All Rights Reserved.
	</p>
</div>

</body>
</html>

